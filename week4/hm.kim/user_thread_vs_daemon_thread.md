### 사용자쓰레드 VS 데몬쓰레드

개요

---

- 자식 쓰레드는 부모 쓰레드의 `상태`를 `상속`받는다.
- 자바에는 `두 가지` 유형의 쓰레드 `사용자, 데몬 쓰레드` 가 있다.
- 자바가 실행되면, JVM은 사용자 쓰레드인 `메인쓰레드`와 나머지 `데몬쓰레드`를 `동시생성`후 시작한다.

---

### 메인 쓰레드 (main thread)

---

- 메인 쓰레드가 `사용자 쓰레드`이기 때문에 하위 쓰레드는 `모두 사용자 쓰레드가 된다.`
- 어플리케이션에서 가장 `중요한 부분`으로 `실행할 때마다 메인 쓰레드가 생성`되어 실행된다.
- 어플리케이션을 실행하는 `최초의 쓰레드`이자 실행을 `완료`하는 `마지막 쓰레드`의 역할을 한다.
- 여러 하위 쓰레드를 추가로 시작할 수 있고, 하위 쓰레드는 또 `여러 하위 쓰레드를 시작`할 수 있다.

---

### 사용자 쓰레드 (user thread)

---

- 사용자 쓰레드는 **`메인 쓰레드에서 직접 생성한 쓰레드`**를 의미한다.
- 자바가 제공하는 쓰레드 풀인 ThreadPoolExecutor는 `사용자 쓰레드를 생성`한다.
- 각각 독립적인 생명주기를 가지고 실행하며 메인 쓰레드를 포함한 `모든 쓰레드가 종료하면 종료된다.`
- foreground에서 실행되는 `높은우선순위`를 가지며 JVM은 쓰레드가 `스스로 종료될때까지 기다린다.`

---

### 데몬 쓰레드 (daemon thread)

---

- JVM에서 생성한 쓰레드 또는 직접 데몬 쓰레드로 생성한 경우를 말한다.
- 자바가 제공하는 쓰레드 풀인 `ForkJoinPool`은 `데몬 쓰레드를 생성`한다.
- 생명주기는 사용자 쓰레드에 따라 다르며 `낮은 우선순위`를 가지고 `background` 에서 실행된다.
- 모든 사용자 쓰레드가 `작업을 완료`하면 `실행 여부에 관계없이` JVM이 쓰레드를 `강제로 종료`한다.
    - 데몬 쓰레드 생성 및 확인
        - void setDaemon (boolean on)
            - 쓰레드를 데몬 또는 비데몬 쓰레드로 표시하며 반드시 시작 전 호출 필요
            - `실행 중인 동안` setDaemon을 `호출 시` IllegalThreadStateException 발생
            - `true`일 시 `데몬 쓰레드`, `false`면 `사용자 쓰레드`가 된다. 기본은 `false`이다.
        - boolean isDaemon()
            - 데몬 쓰레드인지 아닌지 여부 판단

        ```java
        MyRunnable run = new MyRunnable();
        Throead thread = new Thread(runnable);
        thread.setDaemon(true);
        thread.start();
        ```