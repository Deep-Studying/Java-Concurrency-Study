# User Mode vs Kernel Mode

### What is kernel?

- `운영체제`의 여러 기능 중 핵심 기능을 담당하는 부분을 `커널`이라고 한다.
- `하드웨어`와 소프트웨어 간 `중재자` 역할을 한다.
- 응용 프로그램이 `하드웨어 자원`에 직접 접근하는 것을 방지하여 `자원`을 `보호`한다.
- 응용 프로그램이 `하드웨어 접근`에 접근하려고 하면 반드시 `운영체제`를 통해서 **접근**해야 한다.

### CPU 권한 모드

- `CPU`는 두 가지 권한 모드로 구분해서 **실행**된다.
- `CPU`는 동작하는 동안 두 가지 모드를 번갈아 가면서 **작업**을 **수행**한다.

### 사용자 모드 (Mode Bit = 1)

- 사용자 `응용 프로그램`의 코드가 **실행** 되는 **모드**다.
- **메모리**의 유저영역만 **접근**이 가능하다.
- 디스크, 메모리, **Printer** 등 여러 **I/O** 장치들과 같은 특정 **리소스**들에 직접 접근할 수 없다.
    - 유저모드에서 **커널 모드**로 전환해서 **작업**을 해야 한다.

### 커널 모드 (Mode Bit = 0)

- `커널 영역`의 코드가 실행되는 **모드**다.
- `메모리`의 유저영역, 커널영역 모두 **접근**이 **가능**하다.
- `하드웨어 자원`에 직접 **접근**할 수 있다.

### 시스템 호출 (System Call)

- `응용 프로그램`이 운영체제의 커널이 제공하는 서비스를 이용하려고 할때 `커널모드`에 접근할 수 있는 **인터페이스다**
- `응용 프로그램`이 파일 **입출력**과 같은 기능을 사용하려면 `커널 모드`일때 실행이 가능하므로 `시스템 콜`을 사용해서 `커널모드`로 **전환**해야 한다.
- **운영체제**는 I/O File System, Security … etc를 사용하기 위한 `다양한 System-Call API`를 이미 **지원**하고 있다.

### 시스템 호출 동작 과정

- 사용자 `응용 프로그램`은 작업 과정에서 `커널`의 기능을 사용하기 위해 빈번하게 `시스템 콜`을 요청한다.
- 사용자 모드와 `커널 모드`를 번갈아 오가는 것은 `컨텍스트 스위칭`과 관련이 있다.
